<!DOCTYPE html>
<html lang="en">
<head>
    <title>Redirect</title>
</head>
<body>
    <script>
        // declare the variable
        let jsonData = {};
        let minClickCount = 999999;
        let targetUrl = "";

        // read json file
        fetch('./url.json')
        .then(function (response) {
            return response.json();
        })
        .then(function (result) {
            // traverse json data and find min click count
            for(let url in result){
                if(result[url] < minClickCount){
                    minClickCount = result[url];
                    targetUrl = url;
                }
            }

            // click count ++
            result[targetUrl]++;

            location.href = targetUrl;
        });

        // write file and redirect
        // fetch('./url.json')
        // .then(function (response) {
        //     return response.json();
        // })
        // .then(function (result) {
        //     data[targetUrl] = jsonData[targetUrl];
        // });
        // location.href = targetUrl;
    </script>
</body>
</html>